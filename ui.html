<style>
  * {
    margin: 0;
    padding: 0;
  }

  /* 第一行样式 */
  .first_line {
    /* width: 100%; */
    display: inline-flex;
  }

  /* 选择方向 */
  .direction {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;

    padding: 10px 20px;
  }

  /* 每列的元素 */
  .direction_col {
    display: flex;
    flex-wrap: nowrap;
  }

  /* 坐标值 */
  .transform {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
  }

  /* 值的对齐 */
  .transform_col {
    display: flex;
    align-items: baseline;
  }

  /* 方向 */
  /* .direction { */
  /* box-sizing: border-box; */
  /* width: 72px; */
  /* height: 72px; */
  /* display: flex; */
  /* justify-items: flex-start; */
  /* flex-direction: row; */
  /* flex: 1; */
  /* flex-wrap: wrap; */
  /* padding: 10px 20px; */
  /* }  */

  .direction_choosebox {
    /* 20+2+2=24 *3= */
    /* display: inline; */
    width: 20px;
    height: 20px;
    border: 1px solid black;
    margin: 1px;
    transition: all 0.2s ease-in-out;
  }

  .direction_choosebox:hover {
    background-color: #cccccc
  }

  /* 坐标值 */
  /* .transform { */
  /* display: inline-flex; */
  /* flex-direction: column; */
  /* justify-items: flex-start; */
  /* float: left; */
  /* width: 50% */
  /* } */



  .transform_label {
    width: 20px;
    text-align: left;
    display: inline-block;
    /* 测试用 */
    /* outline: 1px solid black; */
  }

  .transform_label::after {
    display: inline;
    content: ": "
  }

  /* 按钮控件 */
  .control {
    display: flex;
    justify-content: space-around;
    margin: 0px 10px;
    align-items: flex-end;
  }

  input[name=direction_choose] {
    display: none
  }

  input[name=direction_choose]:checked+* {
    background-color: #3e3e3e
  }

  input[type=text] {
    width: 50px;
    overflow: hidden;
    border: 0px solid transparent;
  }

  input[type=text]:disabled {
    background-color: white;
  }

  /* 按钮样式 */
  button {
    padding: 10px 20px;
    background-color: white;
    border: 1px dashed black;
    border-radius: 10%;
    /* transition: all .2s ease-in-out; */
  }

  /* 按钮点击样式 */
  button:active {
    background-color: #eeeeee
  }

  /* 按钮划过样式 */
  button:hover {
    border: 1px solid black;
  }

  /* 复制按钮 */
  a {
    color: rgb(2, 167, 227);
    font-size: 12px;
    margin-left: 2px;
  }

  a:hover {
    color: black;
    cursor: pointer;
  }
</style>
<!-- 第一行 -->
<div class="first_line">
  <!-- <h3>坐标位置:</h3> -->
  <div class="direction">
    <div class="direction_col">
      <input type="radio" name="direction_choose" id="direction_choose_lefttop" value="lefttop" checked="true">
      <label for="direction_choose_lefttop" class="direction_choosebox"></label>
      <input type="radio" name="direction_choose" id="direction_choose_top" value="top">
      <label for="direction_choose_top" class="direction_choosebox"></label>
      <input type="radio" name="direction_choose" id="direction_choose_righttop" value="righttop">
      <label for="direction_choose_righttop" class="direction_choosebox"></label>
    </div>
    <div class="direction_col">
      <input type="radio" name="direction_choose" id="direction_choose_left" value="left">
      <label for="direction_choose_left" class="direction_choosebox"></label>
      <input type="radio" name="direction_choose" id="direction_choose_center" value="center">
      <label for="direction_choose_center" class="direction_choosebox"></label>
      <input type="radio" name="direction_choose" id="direction_choose_right" value="right">
      <label for="direction_choose_right" class="direction_choosebox"></label>
    </div>
    <div class="direction_col">
      <input type="radio" name="direction_choose" id="direction_choose_leftbottom" value="leftbottom">
      <label for="direction_choose_leftbottom" class="direction_choosebox"></label>
      <input type="radio" name="direction_choose" id="direction_choose_bottom" value="bottom">
      <label for="direction_choose_bottom" class="direction_choosebox"></label>
      <input type="radio" name="direction_choose" id="direction_choose_rightbottom" value="rightbottom">
      <label for="direction_choose_rightbottom" class="direction_choosebox"></label>
    </div>
  </div>
  <!-- 坐标值 -->
  <div class="transform">
    <div class="transform_col">
      <label class="transform_label" for="transform_x">x</label>
      <input type="text" id="transform_x" value="0" disabled>
      <a onclick="copySingle('x')">复制</a>
    </div>
    <div class="transform_col">
      <label class="transform_label" for="transform_y">y</label>
      <input type="text" id="transform_y" value="0" disabled>
      <a onclick="copySingle('y')">复制</a>
    </div>
    <div class="transform_col">
      <label class="transform_label" for="transform_w">w</label>
      <input type="text" id="transform_w" value="0" disabled>
      <a onclick="copySingle('w')">复制</a>
    </div>
    <div class="transform_col">
      <label class="transform_label" for="transform_h">h</label>
      <input type="text" id="transform_h" value="0" disabled>
      <a onclick="copySingle('h')">复制</a>
    </div>
  </div>
</div>
<!-- 控件 -->
<div class="control">
  <button id="btn_image">图片</button>
  <span id="moreMenu">
    <svg width="10" height="5" viewBox="0 0 10 5" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M5 5L-3.98116e-07 -1.49012e-07L10 -1.49012e-07L5 5Z" fill="black" />
    </svg>
  </span>
  <button id="btn_button">按钮</button>
</div>
</div>


<script>
  let obj = {
    direction: "lefttop",
  }
  // obj.definePropetity()
  window.onload = function () {
    // document.getElementsByName("direction_choose").forEach(node => {
    //   node.checked ? obj.direction = node.value : 0
    // })
    obj.x = document.getElementById("transform_x")
    obj.y = document.getElementById("transform_y")
    obj.w = document.getElementById("transform_w")
    obj.h = document.getElementById("transform_h")
    document.getElementsByName("direction_choose").forEach(node => {
      node.addEventListener("click", function () {
        obj.direction = node.value
        update()
      })
    })
  }

  document.getElementById("btn_image").onclick = function () {
    let str = `x="${obj.x.value}" y="${obj.y.value}"`
    obj.str ? str += obj.str : undefined
    copy(str)
  }
  document.getElementById("btn_button").onclick = function () {
    copy(`x="${data.x}" y="${data.y}" w="${data.w}" h="${data.h}"`)
  }
  // 更多菜单
  document.getElementById("moreMenu").onclick = function () {

  }

  // 复制单个属性
  function copySingle(type) {
    switch (type) {
      case "x":
        copy(obj.x.value)
        break
      case "y":
        copy(obj.y.value)
        break
      case "w":
        copy(obj.w.value)
        break
      case "h":
        copy(obj.h.value)
        break
    }
  }

  // 复制文本到剪切板
  function copy(content) {
    let copy = (e) => {
      e.preventDefault()
      e.clipboardData.setData('text/plain', content)
      document.removeEventListener('copy', copy)
    }
    document.addEventListener('copy', copy)
    document.execCommand("Copy");
  }

  // console.log(obj)

  let data = {
    x: 0,
    y: 0,
    w: 0,
    h: 0
  }
  onmessage = event => {
    data = event.data.pluginMessage
    // console.log()
    update()
  }

  // 对页面数据进行修改
  function update() {
    obj.w.value = numberSort(data.w)
    obj.h.value = numberSort(data.h)
    switch (obj.direction) {
      case "lefttop":
        obj.x.value = numberSort(data.x)
        obj.y.value = numberSort(data.y)
        obj.str = undefined
        break
      case "top":
        obj.x.value = numberSort(data.x + data.w / 2)
        obj.y.value = numberSort(data.y)
        obj.str = ` align="center"`
        break
      case "righttop":
        obj.x.value = numberSort(data.x + data.w)
        obj.y.value = numberSort(data.y)
        obj.str = ` align="right"`
        break
      case "left":
        obj.x.value = numberSort(data.x)
        obj.y.value = numberSort(data.y + data.h / 2)
        obj.str = ` align="left" alignV="center"`
        break
      case "center":
        obj.x.value = numberSort(data.x + data.w / 2)
        obj.y.value = numberSort(data.y + data.h / 2)
        obj.str = ` align="center" alignV="center"`
        break
      case "right":
        obj.x.value = numberSort(data.x + data.w)
        obj.y.value = numberSort(data.y + data.h / 2)
        obj.str = ` align="right" alignV="center"`
        break
      case "leftbottom":
        obj.x.value = numberSort(data.x)
        obj.y.value = numberSort(data.y + data.h)
        obj.str = ` align="left" alignV="bottom"`
        break
      case "bottom":
        obj.x.value = numberSort(data.x + data.w / 2)
        obj.y.value = numberSort(data.y + data.h)
        obj.str = ` align="center" alignV="bottom"`
        break
      case "rightbottom":
        obj.x.value = numberSort(data.x + data.w)
        obj.y.value = numberSort(data.y + data.h)
        obj.str = ` align="right" alignV="bottom"`
        break
    }
  }

  // 计算数字是否需要保留小数位
  function numberSort(number) {
    return (/\./).test(number) ? number.toFixed(1) : number
  }


</script>